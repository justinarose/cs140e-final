##################################################################
#  DO NOT EDIT THIS FILE!!!
#  	DO NOT EDIT THIS FILE!!!
#  		DO NOT EDIT THIS FILE!!!
#  			DO NOT EDIT THIS FILE!!!
#  				DO NOT EDIT THIS FILE!!!
#
# only change manifest.mk

include manifest.mk

LIB_OBJS = $(SRC:.c=.o) $(SUPPORT_SRC:.c=.o)
LIB_OBJS := $(LIB_OBJS:.s=.o)


ARM = arm-none-eabi
CC = $(ARM)-gcc
LD  = $(ARM)-ld
AS  = $(ARM)-as
OD  = $(ARM)-objdump
OCP = $(ARM)-objcopy
CFLAGS = -Wall -nostdlib -nostartfiles -ffreestanding  -march=armv6 -Og -std=gnu99 -I../libpi-include

TARGET = libpi.a

all : $(TARGET) start.o

.s.o:
	$(AS) $(ASFLAGS) $< -o $@ 

.c.o:
	$(CC) $(CFLAGS) -c $<  -o $@

$(TARGET): $(LIB_OBJS) $(SUPPORT_OBJS)
	arm-none-eabi-ar crf $(TARGET) $^ 
	$(OD) -D $@ > $@.list

clean :
	rm -f $(LIB_OBJS) *.o *.bin *.hex *.elf *.list *.img *~ $(TARGET)  Makefile.bak 

depend: 
	makedepend $(SRC)
